/* =========================================================
 * File: styles/theme.css
 * 标题：全局主题（字体 & 颜色的唯一修改入口）
 * 用法：组件中通过 var(--color-*) / var(--font-*) 使用
 * 修改：仅在此文件修改变量，即可全站生效
 * =======================================================*/

/* —— 字体设置（中文优先，含英文字体回退） —— */
:root {
    --font-sans: "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",
                 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial,
                 "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji", sans-serif;
    --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
                 "Liberation Mono", "Courier New", monospace;
  
    /* —— 主题色（修改此处可全站换色） —— */
    --color-bg: #ffffff;
    --color-fg: #111827;          /* 主文字色 */
    --color-muted: #6b7280;       /* 次级文字（灰） */
    --color-brand: #2563eb;       /* 品牌主色（按钮/链接） */
    --color-chip: #f3f4f6;        /* 未选 chip 背景 */
    --color-chip-active: #dbeafe; /* 选中 chip 背景 */
  
    /* —— 布局尺寸（避免跳动） —— */
    --filters-h: 420px;           /* 筛选区固定高度，改这里 */
    --container-w: 1200px;        /* 主容器宽度上限 */
  }
  
  /* —— 全局基底 —— */
  html, body, #__nuxt {
    height: 100%;
    background: var(--color-bg);
    color: var(--color-fg);
    font-family: var(--font-sans);
  }
  
  /* —— 常用工具类（如轻量文本色） —— */
  .text-muted { color: var(--color-muted); }

  /* —— TopBar 容器布局（与主容器对齐） —— */
  .topbar-container {
    margin-left: auto;
    margin-right: auto;
    padding-left: 16px; /* 与主容器保持一致 */
    padding-right: 16px;
  }

  /* —— 主容器布局（与 TopBar 对齐） —— */
  .main-container {
    margin-left: auto;
    margin-right: auto;
    padding-left: 16px; /* 与 TopBar 的容器 padding 保持一致 */
    padding-right: 16px;
    padding-top: 24px; /* py-6 */
    padding-bottom: 24px;
  }

  /* ============ Filter Grid layout ============ */
/* 筛选区的栅格：最小高度而非固定高度，防止内容压到下面 */
.filters-grid { min-height: var(--filters-h); }

/* 等高网格行：每个格子（FilterGroup）等高，内部再滚动 */
.grid-equal {
  display: grid;
  grid-template-columns: repeat(1, minmax(0, 1fr));
  gap: 12px;
  grid-auto-rows: 1fr; /* 关键：让每个网格单元等高 */
}

/* 响应式列数（与你现在的 1/2/3 列一致） */
@media (min-width: 768px) {
  .grid-equal { grid-template-columns: repeat(2, minmax(0, 1fr)); }
}
@media (min-width: 1024px) {
  .grid-equal { grid-template-columns: repeat(3, minmax(0, 1fr)); }
}

/* =====================================================
   Filter card base styles
   说明：
   - .filter-card        : 通用外框（边框/圆角/内边距）
   - .filter-card--a     : 浅灰背景 A
   - .filter-card--b     : 浅灰背景 B
   - .filter-stack       : 竖直堆叠容器（控制筛选卡之间的间距）
   修改配色、圆角、间距请来这里动，不要到处找 inline style。
   ===================================================== */

   .filter-stack {
    display: flex;
    flex-direction: column;
    gap: 12px; /* 卡片之间的竖向间距 */
  }
  
  /* 卡片公共框体 */
  .filter-card {
    border: 1px solid #e5e7eb; /* 浅灰边框 */
    border-radius: 8px;        /* 圆角半径 */
    padding: 12px;             /* 内边距 */
  }
  
  /* 两种交替背景色，方便视觉分组 */
  .filter-card--a {
    background-color: #fafafa; /* 比较亮的浅灰 */
  }
  
  .filter-card--b {
    background-color: #f5f5f5; /* 稍微深一点点的浅灰 */
  }

  /* 筛选组标题区域 */
  .filter-group-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 8px; /* 减少与下方内容的间距 */
  }

  /* 筛选组标题样式（减少行高和边距） */
  .filter-group-title {
    font-size: 0.875rem; /* text-sm */
    font-weight: 500; /* font-medium */
    line-height: 1.2; /* 减少行高，默认通常为 1.5 或更大 */
    margin: 0; /* 移除 h3 默认的上下边距 */
    padding: 0; /* 移除默认内边距 */
  }

  /* 筛选区 chips 容器 */
  .filter-chips-container {
    flex: 1;
    min-height: 0;
    overflow: auto;
    display: flex;
    flex-wrap: wrap;
    gap: 12px; /* 与结果标签 chips 保持一致的间距 */
  }

/* =====================================================
   Filter Tabs styles (标签页设计)
   说明：
   - .filter-tabs-container      : 标签页容器（文件夹样式）
   - .filter-tabs-header          : 标签按钮行（水平排列）
   - .filter-tab-button           : 标签按钮
   - .filter-tab-button--active   : 激活状态的标签按钮
   - .filter-tab-content          : 标签页内容区域（固定高度）
   - .filter-tab-panel             : 单个标签页面板
   - .filter-tab-label             : 标签文本
   - .filter-tab-count             : 已选数量计数
   ===================================================== */

  /* 标签页容器（文件夹样式） */
  .filter-tabs-container {
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    background-color: #ffffff;
    overflow: hidden;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
  }

  /* 标签按钮行（水平排列，居左对齐） */
  .filter-tabs-header {
    display: flex;
    justify-content: flex-start; /* 居左对齐 */
    align-items: flex-end; /* 底部对齐，便于层叠效果 */
    border-bottom: 1px solid #e5e7eb;
    background-color: #fafafa;
    padding-left: 0;
    padding-right: 0;
    overflow-x: auto;
    /* 隐藏滚动条但保持滚动功能 */
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE/Edge */
    position: relative;
    height: 40px; /* 固定高度，确保标签对齐（从48px减小到40px） */
  }

  .filter-tabs-header::-webkit-scrollbar {
    display: none; /* Chrome/Safari */
  }

  /* 标签按钮（直角梯形，左边直角，右边斜边） */
  .filter-tab-button {
    position: relative;
    width: 130px; /* 固定宽度，确保能显示文字+计数 */
    height: 36px; /* 固定高度（从40px减小到36px） */
    padding: 0 16px;
    border: none;
    background-color: #f5f5f5; /* 默认未选中背景色（会被特定颜色覆盖） */
    color: var(--color-fg);
    font-size: 0.875rem; /* text-sm */
    font-weight: 500;
    cursor: pointer;
    transition: none; /* 移除所有动画，避免位移 */
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    white-space: nowrap;
    /* 创建直角梯形：左边直角，右边斜边（约18度角） */
    clip-path: polygon(0 0, calc(100% - 12px) 0, 100% 100%, 0 100%);
    margin-right: -12px; /* 负边距实现层叠效果，缩短按钮间距 */
    z-index: 1; /* 默认 z-index */
  }

  /* 统一配色方案：未选中状态统一为灰色，添加主题色边框显示梯形 */
  /* 1. Authors - 樱花粉 (序号2) */
  .filter-tab-button--authors {
    background-color: #F3F4F6; /* 未选中：统一灰色 */
    border: 1.5px solid #FBCFE8; /* 樱花粉边框，显示梯形 */
  }

  /* 2. Books - 奶油橘 (序号5) */
  .filter-tab-button--books {
    background-color: #F3F4F6; /* 未选中：统一灰色 */
    border: 1.5px solid #FED7AA; /* 奶油橘边框，显示梯形 */
  }

  /* 3. Genres - 芝士黄 (序号7) */
  .filter-tab-button--genres {
    background-color: #F3F4F6; /* 未选中：统一灰色 */
    border: 1.5px solid #FDE047; /* 芝士黄边框，显示梯形 */
  }

  /* 4. Times - 薄荷绿 (序号3) */
  .filter-tab-button--times {
    background-color: #F3F4F6; /* 未选中：统一灰色 */
    border: 1.5px solid #BBF7D0; /* 薄荷绿边框，显示梯形 */
  }

  /* 5. Themes - 天空蓝 (序号1) */
  .filter-tab-button--themes {
    background-color: #F3F4F6; /* 未选中：统一灰色 */
    border: 1.5px solid #BAE6FD; /* 天空蓝边框，显示梯形 */
  }

  /* 6. Devices - 冰川青 (序号6) */
  .filter-tab-button--devices {
    background-color: #F3F4F6; /* 未选中：统一灰色 */
    border: 1.5px solid #A5F3FC; /* 冰川青边框，显示梯形 */
  }

  /* 7. Search - 香芋紫 (序号4) */
  .filter-tab-button--search {
    background-color: #F3F4F6; /* 未选中：统一灰色 */
    border: 1.5px solid #D8B4FE; /* 香芋紫边框，显示梯形 */
  }

  /* 未选中标签的轻微层叠 */
  .filter-tab-button:not(.filter-tab-button--active) {
    z-index: 1;
  }

  .filter-tab-button:hover:not(.filter-tab-button--active) {
    /* hover时稍微加深背景色，但保持原有色调 */
    z-index: 2; /* hover 时稍微提升 */
  }

  /* Hover状态：根据表格设置 */
  .filter-tab-button--authors:hover:not(.filter-tab-button--active) {
    background-color: #FCE7F3; /* 樱花粉 hover */
  }

  .filter-tab-button--books:hover:not(.filter-tab-button--active) {
    background-color: #FFEDD5; /* 奶油橘 hover */
  }

  .filter-tab-button--genres:hover:not(.filter-tab-button--active) {
    background-color: #FEF9C3; /* 芝士黄 hover */
  }

  .filter-tab-button--times:hover:not(.filter-tab-button--active) {
    background-color: #DCFCE7; /* 薄荷绿 hover */
  }

  .filter-tab-button--themes:hover:not(.filter-tab-button--active) {
    background-color: #E0F2FE; /* 天空蓝 hover */
  }

  .filter-tab-button--devices:hover:not(.filter-tab-button--active) {
    background-color: #CFFAFE; /* 冰川青 hover */
  }

  .filter-tab-button--search:hover:not(.filter-tab-button--active) {
    background-color: #F3E8FF; /* 香芋紫 hover */
  }

  /* 激活状态的标签按钮（覆盖右侧标签） */
  .filter-tab-button--active {
    color: var(--color-fg); /* 保持黑色文字，不使用蓝色 */
    border: none; /* 激活时移除边框，只保留底部边框 */
    border-bottom: 2px solid var(--color-brand);
    margin-bottom: -1px; /* 覆盖底部边框 */
    font-weight: 600;
    z-index: 10; /* 激活标签在最上层 */
    margin-right: -12px; /* 与未激活按钮保持相同间距，避免位移 */
  }

  /* 激活状态：根据表格设置，并添加对应颜色的底部边框 */
  .filter-tab-button--authors.filter-tab-button--active {
    background-color: #FBCFE8; /* 樱花粉 selected */
    border-bottom-color: #ec4899; /* 樱花粉边框 */
  }

  .filter-tab-button--books.filter-tab-button--active {
    background-color: #FED7AA; /* 奶油橘 selected */
    border-bottom-color: #fb923c; /* 奶油橘边框 */
  }

  .filter-tab-button--genres.filter-tab-button--active {
    background-color: #FDE047; /* 芝士黄 selected */
    border-bottom-color: #eab308; /* 芝士黄边框 */
  }

  .filter-tab-button--times.filter-tab-button--active {
    background-color: #BBF7D0; /* 薄荷绿 selected */
    border-bottom-color: #10b981; /* 薄荷绿边框 */
  }

  .filter-tab-button--themes.filter-tab-button--active {
    background-color: #BAE6FD; /* 天空蓝 selected */
    border-bottom-color: #0ea5e9; /* 天空蓝边框 */
  }

  .filter-tab-button--devices.filter-tab-button--active {
    background-color: #A5F3FC; /* 冰川青 selected */
    border-bottom-color: #06b6d4; /* 冰川青边框 */
  }

  .filter-tab-button--search.filter-tab-button--active {
    background-color: #D8B4FE; /* 香芋紫 selected */
    border-bottom-color: #a78bfa; /* 香芋紫边框 */
  }

  .filter-tab-button--active:hover {
    /* 保持激活时的背景色不变 */
    z-index: 10; /* 保持最上层 */
  }

  /* 标签文本 */
  .filter-tab-label {
    flex-shrink: 0;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 80px; /* 确保有空间显示计数 */
  }

  /* 已选数量计数 */
  .filter-tab-count {
    font-size: 0.75rem; /* text-xs */
    color: var(--color-muted);
    font-weight: 400;
    flex-shrink: 0;
  }

  .filter-tab-button--active .filter-tab-count {
    color: var(--color-muted); /* 保持灰色，与未激活状态一致 */
  }

  /* 标签页内容区域（固定高度） */
  .filter-tab-content {
    height: 100px; /* 固定高度，统一6个标签页（从400px减半到200px） */
    overflow: hidden;
    position: relative;
  }

  /* 单个标签页面板 */
  .filter-tab-panel {
    height: 100%;
    padding: 16px;
    overflow-y: auto;
  }

/* =====================================================
   Result card styles
   说明：
   - .result-card        : 结果卡片基础样式（边框/圆角/内边距）
   - .result-card--even  : 偶数索引背景色（更亮）
   - .result-card--odd   : 奇数索引背景色（稍深）
   - .result-stack       : 结果列表容器（控制卡片间距）
   修改配色、圆角、间距请来这里，保持与筛选卡片风格一致。
   ===================================================== */

  .result-stack {
    display: flex;
    flex-direction: column;
    gap: 12px; /* 卡片之间的竖向间距 */
  }

  /* 结果卡片公共框体 */
  .result-card {
    border: 1px solid #e5e7eb; /* 浅灰边框 */
    border-radius: 8px;        /* 圆角半径 */
    padding: 16px;             /* 内边距（比筛选卡片稍大，因为内容更多） */
    transition: box-shadow 0.2s ease; /* 添加悬停效果过渡 */
  }

  .result-card:hover {
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05); /* 悬停时轻微阴影 */
  }

  /* 两种交替背景色，方便视觉分组 */
  .result-card--even {
    background-color: #ffffff; /* 白色背景 */
  }

  .result-card--odd {
    background-color: #fafafa; /* 浅灰背景 */
  }

  /* 结果标签 chips 容器 */
  .result-chips-container {
    display: flex;
    flex-wrap: wrap;
    gap: 12px; /* 12px 间距，确保 chip 之间有明显的间隔 */
  }

  /* 结果标签 chips（展示用，暂不可点击） */
  .result-chip {
    display: inline-block;
    padding: 4px 10px;
    border-radius: 6px;
    font-size: 0.75rem; /* text-xs */
    line-height: 1.5;
    border: 1px solid #e5e7eb;
    color: var(--color-fg);
    white-space: nowrap;
  }

  /* 交替背景色：灰白区分 */
  .result-chip--even {
    background-color: #ffffff; /* 白色背景 */
  }

  .result-chip--odd {
    background-color: #f3f4f6; /* 浅灰背景（与 var(--color-chip) 一致） */
  }

          /* 英文书名斜体样式（结果卡片中的书名 chips） */
          .result-chip--book {
            font-style: italic;
          }

          /* 被选中的标签（匹配搜索条件）加粗样式 */
          .result-chip--matched {
            font-weight: 600;
            border-width: 2px;
            border-color: var(--color-brand);
          }

  /* 英文书名斜体样式（筛选区中的书名 chips） */
  .filter-chip--book {
    font-style: italic;
  }

  /* =====================================================
     Filter Chips - 主题色三种状态
     说明：每个标签组的 chip 跟随对应标签的主题色
     - 未选中：统一灰色背景 + 主题色边框
     - hover：主题色 hover 背景 + 主题色边框
     - 选中：主题色 selected 背景 + 主题色边框
     ===================================================== */

  /* 基础 chip 样式 */
  .filter-chip {
    transition: background-color 0.2s ease, border-color 0.2s ease;
    cursor: pointer;
  }

  /* 1. Authors (樱花粉) */
  .filter-chip--authors {
    background-color: #F3F4F6; /* 未选中：统一灰色 */
    border-color: #d1d5db; /* 未选中时显示浅灰色边框，提示可点击 */
  }

  .filter-chip--authors:hover:not(.filter-chip--active) {
    background-color: #FCE7F3; /* 樱花粉 hover */
    border-color: #d1d5db; /* hover 时保持浅灰色边框 */
  }

  .filter-chip--authors.filter-chip--active {
    background-color: #FBCFE8; /* 樱花粉 selected */
    border-color: #ec4899; /* 选中时显示更深的樱花粉边框 */
  }

  /* 2. Books (奶油橘) */
  .filter-chip--books {
    background-color: #F3F4F6; /* 未选中：统一灰色 */
    border-color: #d1d5db; /* 未选中时显示浅灰色边框，提示可点击 */
  }

  .filter-chip--books:hover:not(.filter-chip--active) {
    background-color: #FFEDD5; /* 奶油橘 hover */
    border-color: #d1d5db; /* hover 时保持浅灰色边框 */
  }

  .filter-chip--books.filter-chip--active {
    background-color: #FED7AA; /* 奶油橘 selected */
    border-color: #fb923c; /* 选中时显示更深的奶油橘边框 */
  }

  /* 3. Genres (芝士黄) */
  .filter-chip--genres {
    background-color: #F3F4F6; /* 未选中：统一灰色 */
    border-color: #d1d5db; /* 未选中时显示浅灰色边框，提示可点击 */
  }

  .filter-chip--genres:hover:not(.filter-chip--active) {
    background-color: #FEF9C3; /* 芝士黄 hover */
    border-color: #d1d5db; /* hover 时保持浅灰色边框 */
  }

  .filter-chip--genres.filter-chip--active {
    background-color: #FDE047; /* 芝士黄 selected */
    border-color: #eab308; /* 选中时显示更深的芝士黄边框 */
  }

  /* 4. Times (薄荷绿) */
  .filter-chip--times {
    background-color: #F3F4F6; /* 未选中：统一灰色 */
    border-color: #d1d5db; /* 未选中时显示浅灰色边框，提示可点击 */
  }

  .filter-chip--times:hover:not(.filter-chip--active) {
    background-color: #DCFCE7; /* 薄荷绿 hover */
    border-color: #d1d5db; /* hover 时保持浅灰色边框 */
  }

  .filter-chip--times.filter-chip--active {
    background-color: #BBF7D0; /* 薄荷绿 selected */
    border-color: #10b981; /* 选中时显示更深的薄荷绿边框 */
  }

  /* 5. Themes (天空蓝) */
  .filter-chip--themes {
    background-color: #F3F4F6; /* 未选中：统一灰色 */
    border-color: #d1d5db; /* 未选中时显示浅灰色边框，提示可点击 */
  }

  .filter-chip--themes:hover:not(.filter-chip--active) {
    background-color: #E0F2FE; /* 天空蓝 hover */
    border-color: #d1d5db; /* hover 时保持浅灰色边框 */
  }

  .filter-chip--themes.filter-chip--active {
    background-color: #BAE6FD; /* 天空蓝 selected */
    border-color: #0ea5e9; /* 选中时显示更深的天空蓝边框 */
  }

  /* 6. Devices (冰川青) */
  .filter-chip--devices {
    background-color: #F3F4F6; /* 未选中：统一灰色 */
    border-color: #d1d5db; /* 未选中时显示浅灰色边框，提示可点击 */
  }

  .filter-chip--devices:hover:not(.filter-chip--active) {
    background-color: #CFFAFE; /* 冰川青 hover */
    border-color: #d1d5db; /* hover 时保持浅灰色边框 */
  }

  .filter-chip--devices.filter-chip--active {
    background-color: #A5F3FC; /* 冰川青 selected */
    border-color: #06b6d4; /* 选中时显示更深的冰川青边框 */
  }

/* =====================================================
   Selected Bar styles
   说明：
   - .selected-bar-card          : 选中栏卡片（白底框）
   - .selected-bar-container      : 选中栏容器（内边距）
   - .selected-bar-header          : 选中栏标题行（标签文字 + 清空按钮）
   - .selected-chips-container     : 选中标签 chips 容器
   - .selected-chip                : 选中标签 chip（全白背景）
   - .selected-chip--book          : 英文书名斜体样式
   - .selected-empty               : 无选中项时的提示文字
   修改配色、间距、圆角请来这里。
   ===================================================== */

  .selected-bar-section {
    margin-bottom: 0; /* 由卡片本身提供间距 */
  }

  .selected-bar-card {
    background-color: #ffffff;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    padding: 16px;
    margin-bottom: 20px; /* 与下方内容保持合适间距 */
    margin-top: 20px; /* 与上方内容保持合适间距 */
  }


  .selected-bar-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 8px;
  }

  .selected-bar-title-section {
    display: flex;
    align-items: center;
    gap: 8px;
    flex: 1;
    min-width: 0;
  }

  .selected-hint {
    font-size: 0.75rem; /* text-xs */
    color: var(--color-muted);
    font-style: italic;
  }

  .selected-bar-actions {
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .selected-action-btn {
    width: 32px;
    height: 32px;
    border-radius: 6px;
    border: 1px solid #e5e7eb;
    background-color: #ffffff;
    color: var(--color-fg);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    transition: background-color 0.2s ease, border-color 0.2s ease;
    padding: 0;
    line-height: 1;
  }

  .selected-action-btn:hover {
    background-color: #f9fafb;
    border-color: #d1d5db;
  }

  .selected-action-btn:disabled,
  .selected-action-btn--disabled {
    opacity: 0.4;
    cursor: not-allowed;
    color: var(--color-muted);
  }

  .selected-clear-all-btn {
    padding: 6px 12px;
    border-radius: 6px;
    border: 1px solid #e5e7eb;
    font-size: 0.875rem;
    background-color: #ffffff;
    color: var(--color-fg);
    cursor: pointer;
    transition: background-color 0.2s ease, opacity 0.2s ease, color 0.2s ease;
  }

  .selected-clear-all-btn:hover:not(:disabled) {
    background-color: #f9fafb;
  }

  .selected-clear-all-btn:disabled,
  .selected-clear-all-btn--disabled {
    opacity: 0.4;
    cursor: not-allowed;
    color: var(--color-muted);
  }

  .selected-chips-container {
    display: flex;
    flex-wrap: wrap;
    gap: 12px; /* 与结果标签 chips 保持一致的间距 */
  }

  .selected-chip {
    display: inline-block;
    padding: 4px 10px;
    border-radius: 6px;
    font-size: 0.75rem; /* text-xs */
    line-height: 1.5;
    background-color: #ffffff; /* 全白背景 */
    border: 1px solid #e5e7eb;
    color: var(--color-fg);
    white-space: nowrap;
    cursor: pointer;
    transition: background-color 0.2s ease, border-color 0.2s ease;
  }

  .selected-chip:hover {
    background-color: #f9fafb;
    border-color: #d1d5db;
  }

  .selected-chip:active {
    background-color: #f3f4f6;
  }

  /* 英文书名斜体样式（选中栏中的书名 chips） */
  .selected-chip--book {
    font-style: italic;
  }

  .selected-empty {
    font-size: 0.875rem;
    color: var(--color-muted);
    padding: 4px 0;
  }

  /* 搜索结果统计（居中显示） */
  .results-count {
    font-size: 0.875rem; /* text-sm */
    text-align: center;
    margin-bottom: 12px;
  }